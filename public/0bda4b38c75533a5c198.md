---
title: AWS S3ã¨GitHub Actionsã‚’ä½¿ç”¨ã—ãŸé™çš„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
tags:
  - AWS
  - GitHubActions
private: false
updated_at: '2023-09-02T00:38:10+09:00'
id: 0bda4b38c75533a5c198
organization_url_name: null
slide: false
---
## ã¯ã˜ã‚ã«
ã“ã‚Œã¾ã§ã€é™çš„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã«ã¯ä¸»ã«Vercelã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã—ãŸãŒã€æŠ€è¡“ã®å¹…ã‚’åºƒã’ã‚‹ãŸã‚ã«AWS S3ã«æŒ‘æˆ¦ã—ã¾ã—ãŸã€‚ã•ã‚‰ã«ã€GitHub Actionsã‚’å°å…¥ã—ã¦ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è‡ªå‹•åŒ–ã—ã€é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Šã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚ã“ã®è¨˜äº‹ã§ã¯ãã®å¿˜å‚™éŒ²ã‚’å…¼ã­ã¦å…±æœ‰ã—ã¾ã™ã€‚

### ã“ã®è¨˜äº‹ã§ç´¹ä»‹ã™ã‚‹å†…å®¹
- Reactã§ä½œæˆã—ãŸã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’AWS S3ã«ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–ã™ã‚‹GitHub Actionsã®è¨­å®šæ–¹æ³•

### ã“ã®è¨˜äº‹ã§ã¯å–ã‚Šæ‰±ã‚ãªã„å†…å®¹
- AWS S3ãƒã‚±ãƒƒãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«é–¢ã™ã‚‹è©³ç´°ãªæ‰‹é †
- GitHub Actionsã¨ã®é€£æºã«å¿…è¦ãªã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ç”Ÿæˆã¨è¨­å®šã®è©³ç´°ãªæ‰‹é †

ä¸Šè¨˜ã®å†…å®¹ã«ã¤ã„ã¦ã¯ã€æ—¢ã«ä»–ã®å„ªã‚ŒãŸè¨˜äº‹ãŒå¤šæ•°å­˜åœ¨ã™ã‚‹ãŸã‚ã€ãã¡ã‚‰ã‚‚å‚è€ƒã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ç§ãŒå‚è€ƒã«ã—ãŸè¨˜äº‹ã¯[ã“ã¡ã‚‰](https://baimamboukar.medium.com/deploy-static-websites-to-aws-s3-via-ci-cd-with-github-actions-faa8c7432a5f)ã§ã™ã€‚

## å‰ææ¡ä»¶

ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

- AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä¿æœ‰ã—ã¦ã„ã‚‹ã“ã¨
- GitHubãƒªãƒã‚¸ãƒˆãƒªãŒæº–å‚™ã•ã‚Œã¦ã„ã‚‹ã“ã¨

## æ‰‹é †

### Reactã‚¢ãƒ—ãƒªã®ç”Ÿæˆ

ã¾ãšã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§Reactã‚¢ãƒ—ãƒªã‚’ç”Ÿæˆã—ã¾ã™ï¼š

```bash
npx create-react-app my-app
```

[create-react-app](https://github.com/facebook/create-react-app)



### AWS S3ãƒã‚±ãƒƒãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—:

ä»¥ä¸‹ã®æ‰‹é †ã§AWS S3ãƒã‚±ãƒƒãƒˆã‚’è¨­å®šã—ã¾ã™ï¼š

1. AWS Management Consoleã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã€S3ã‚µãƒ¼ãƒ“ã‚¹ã«ç§»å‹•ã—ã¾ã™ã€‚
2. æ–°ã—ã„ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã—ã€ã‚¦ã‚§ãƒ–ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚
3. ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

æ³¨æ„: ã“ã“ã§ã¯æ‰‹é †ã‚’ç°¡ç•¥åŒ–ã—ã¦èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

### GitHubãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®š

ä»¥ä¸‹ã®æ‰‹é †ã§GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’è¨­å®šã—ã¾ã™ï¼š

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã€my-appã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¾ã™ã€‚
2. AWS S3ã§ç”Ÿæˆã—ãŸã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’GitHub Actionsã«è¨­å®šã—ã¾ã™ã€‚

### GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®è¨­å®š

#### GitHub Actionsã¨ã¯ï¼Ÿ
> GitHub Actions ã¯ã€ãƒ“ãƒ«ãƒ‰ã€ãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è‡ªå‹•åŒ–ã§ãã‚‹ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ç¶™ç¶šçš„ãƒ‡ãƒªãƒãƒªãƒ¼ (CI/CD) ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

å¼•ç”¨: [GitHub Actions ã‚’ç†è§£ã™ã‚‹](https://docs.github.com/ja/actions/learn-github-actions/understanding-github-actions)

ã“ã“ã§ã¯mainãƒ–ãƒ©ãƒ³ãƒã¸ã®pushã‚’ãƒˆãƒªã‚¬ãƒ¼ã¨ã—ã¦ã€AWS S3ã®ãƒã‚±ãƒƒãƒˆã«ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®è¨­å®šã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚

ä»¥ä¸‹ã®å†…å®¹ã§GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è¨­å®šã—ã¾ã™ï¼š

```yaml:sample.yaml

name: Build and deploy static website to AWS-S3 on push

on:
  push:
    branches:
      - main
jobs: 
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Set up AWS CLI
        uses: aws-actions/configure-aws-credentials@v1
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: eu-west-3
      
      - name: Build
        run: npm ci && npm run build

      - name: Deploy to AWS S3
        run: |
          aws s3 sync ./build s3://<your-bucket-name> --delete
```

ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›´ã‚’åŠ ãˆã¦ã‚³ãƒŸãƒƒãƒˆ&ãƒ—ãƒƒã‚·ãƒ¥ã—ã€ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒAWS S3ã®ãƒã‚±ãƒƒãƒˆã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

### æ³¨æ„

- `<your-bucket-name>`ã«ã¯ä½œæˆã—ãŸãƒã‚±ãƒƒãƒˆåã‚’å…¥åŠ›ã—ã¾ã™ã€‚
- `your-aws-regionã«ã¯`ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã—ãŸåœ°åŸŸã‚’æŒ‡å®šã—ã¾ã™ã€‚
- `secrets.AWS_ACCESS_KEY_ID`ã¨`secrets.AWS_SECRET_ACCESS_KEY`ã¯ã€GitHubãƒªãƒã‚¸ãƒˆãƒªã®Secretsã«ä¿å­˜ã•ã‚ŒãŸAWSã®èªè¨¼æƒ…å ±ã§ã™ã€‚


## ã¾ã¨ã‚

ã“ã‚Œã§ã€GitHub Actionsã‚’ä½¿ç”¨ã—ã¦AWS S3ã«é™çš„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’è‡ªå‹•çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒæ§‹ç¯‰ã•ã‚Œã¾ã—ãŸã€‚mainãƒ–ãƒ©ãƒ³ãƒã¸ã®å¤‰æ›´ãŒãƒˆãƒªã‚¬ãƒ¼ã¨ãªã‚Šã€è‡ªå‹•çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ãŒè¡Œã‚ã‚Œã‚‹ãŸã‚ã€é–‹ç™ºåŠ¹ç‡ã®å‘ä¸ŠãŒæœŸå¾…ã§ãã¾ã™ã€‚

å€‹äººçš„ã«è©°ã¾ã£ãŸãƒã‚¤ãƒ³ãƒˆã¯ã€buildã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’S3ã¸ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ã“ã‚ã§ã™ã€‚çµè«–ã¨ã—ã¦ã€buildã¨deployã‚’ï¼‘ã¤ã®stepså†…ã«è¨­å®šã—ã€AWSã¸ã®deployã‚’ `./build` é…ä¸‹ã§è¡Œã†ã‚ˆã†ã«ã—ãŸã¨ã“ã‚è§£æ±ºã—ã¾ã—ãŸ:sparkles:

ãŠèª­ã¿ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ãŠæ°—ã¥ãã®ã“ã¨ãŒã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆã‚’é ‚ã‘ã‚‹ã¨å¹¸ã„ã§ã™ğŸ˜Š

## å¼•ç”¨
- [Deploy static websites to AWS S3 via CI/CD with GitHub Actions](https://baimamboukar.medium.com/deploy-static-websites-to-aws-s3-via-ci-cd-with-github-actions-faa8c7432a5f)
- [Workflow syntax for GitHub Actions](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions)
